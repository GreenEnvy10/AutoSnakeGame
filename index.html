<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Autonomous 2-Snake Game</title>
  <style>
    body {
      background: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
      color: #fff;
    }
    canvas {
      background: #000;
      border: 2px solid #fff;
      margin-top: 10px;
    }
    #message {
      font-size: 24px;
      margin-bottom: 10px;
    }
    .buttons {
      margin-bottom: 10px;
    }
    button {
      font-size: 18px;
      padding: 10px;
      margin: 5px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
    }
    #start {
      background: green;
      color: white;
    }
    #restart {
      background: red;
      color: white;
      display: none;
    }
    .stats {
      margin-top: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div id="message">Press Start to Begin</div>
  <div class="buttons">
    <button id="start">Start</button>
    <button id="restart">Restart</button>
  </div>
  <canvas id="gameCanvas" width="600" height="600"></canvas>
  <div class="stats">
    Games Played: <span id="gamesPlayed">0</span> |
    Snake 1 Wins: <span id="snake1Wins">0</span> |
    Snake 2 Wins: <span id="snake2Wins">0</span>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const gridSize = 20;
    const cols = canvas.width / gridSize;
    const rows = canvas.height / gridSize;
    const frameRate = 100;
    let gameInterval, gamesPlayed = 0, snake1Wins = 0, snake2Wins = 0;

    class Snake {
      constructor(color, startX, startY) {
        this.color = color;
        this.body = [{ x: startX, y: startY }];
        this.dir = { x: 0, y: 0 };
        this.alive = true;
      }
      get head() {
        return this.body[0];
      }
      decideDirection(food, otherSnake) {
        if (!this.alive) return;
        const directions = [
          { x: 0, y: -1 },
          { x: 1, y: 0 },
          { x: 0, y: 1 },
          { x: -1, y: 0 }
        ].filter(d => {
          if (this.body.length > 1 && d.x === -this.dir.x && d.y === -this.dir.y) return false;
          const newX = this.head.x + d.x, newY = this.head.y + d.y;
          if (newX < 0 || newX >= cols || newY < 0 || newY >= rows) return false;
          for (let cell of this.body) if (cell.x === newX && cell.y === newY) return false;
          if (otherSnake) for (let cell of otherSnake.body) if (cell.x === newX && cell.y === newY) return false;
          return true;
        });
        if (validDirs.length > 0) this.dir = validDirs.sort((a, b) =>
          (Math.abs((this.head.x + a.x) - food.x) + Math.abs((this.head.y + a.y) - food.y)) -
          (Math.abs((this.head.x + b.x) - food.x) + Math.abs((this.head.y + b.y) - food.y))
        )[0];
      }
      move() {
        if (!this.alive) return;
        const newHead = { x: this.head.x + this.dir.x, y: this.head.y + this.dir.y };
        this.body.unshift(newHead);
        this.body.pop();
      }
      grow() {
        this.body.unshift({ x: this.head.x + this.dir.x, y: this.head.y + this.dir.y });
      }
      checkCollision() {
        for (let i = 1; i < this.body.length; i++) if (this.head.x === this.body[i].x && this.head.y === this.body[i].y) this.alive = false;
        if (this.head.x < 0 || this.head.x >= cols || this.head.y < 0 || this.head.y >= rows) this.alive = false;
      }
    }

    let snake1, snake2, food;
    
    function resetGame() {
      snake1 = new Snake("lime", 5, 5);
      snake2 = new Snake("cyan", cols - 6, rows - 6);
      snake1.dir = { x: 1, y: 0 };
      snake2.dir = { x: -1, y: 0 };
      food = randomFood();
      document.getElementById("message").textContent = "Game in Progress";
      document.getElementById("restart").style.display = "none";
      gameInterval = setInterval(update, frameRate);
    }

    function randomFood() {
      let pos;
      while (true) {
        pos = { x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows) };
        if (!snake1.body.some(cell => cell.x === pos.x && cell.y === pos.y) &&
            !snake2.body.some(cell => cell.x === pos.x && cell.y === pos.y)) break;
      }
      return pos;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawCell(food.x, food.y, "red");
      if (snake1.alive) snake1.body.forEach((cell, i) => drawCell(cell.x, cell.y, i === 0 ? "yellow" : snake1.color));
      if (snake2.alive) snake2.body.forEach((cell, i) => drawCell(cell.x, cell.y, i === 0 ? "orange" : snake2.color));
    }

    function drawCell(x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x * gridSize, y * gridSize, gridSize, gridSize);
    }

    function update() {
      if ((!snake1.alive && !snake2.alive) || (!snake1.alive && snake2.alive) || (snake1.alive && !snake2.alive)) {
        clearInterval(gameInterval);
        document.getElementById("restart").style.display = "inline";
        gamesPlayed++;
        if (snake1.alive) { snake1Wins++; document.getElementById("message").textContent = "Snake 1 Wins!"; }
        else if (snake2.alive) { snake2Wins++; document.getElementById("message").textContent = "Snake 2 Wins!"; }
        else document.getElementById("message").textContent = "Game Over! Both Snakes Died.";
        updateStats();
        return;
      }
      snake1.decideDirection(food, snake2);
      snake2.decideDirection(food, snake1);
      snake1.move();
      snake2.move();
      snake1.checkCollision();
      snake2.checkCollision();
      if (snake1.alive && snake1.head.x === food.x && snake1.head.y === food.y) { snake1.grow(); food = randomFood(); }
      if (snake2.alive && snake2.head.x === food.x && snake2.head.y === food.y) { snake2.grow(); food = randomFood(); }
      draw();
    }

    function updateStats() {
      document.getElementById("gamesPlayed").textContent = gamesPlayed;
      document.getElementById("snake1Wins").textContent = snake1Wins;
      document.getElementById("snake2Wins").textContent = snake2Wins;
    }

    document.getElementById("start").addEventListener("click", resetGame);
    document.getElementById("restart").addEventListener("click", resetGame);
  </script>
</body>
</html>
